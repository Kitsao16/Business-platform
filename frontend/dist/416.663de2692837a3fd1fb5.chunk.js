"use strict";(self.webpackChunkbusiness_platform=self.webpackChunkbusiness_platform||[]).push([[416],{7100:(e,n,t)=>{t.d(n,{A:()=>i});var r=t(1601),s=t.n(r),a=t(6314),o=t.n(a)()(s());o.push([e.id,".admin-page {\n    max-width: 800px;\n    margin: 0 auto;\n    padding: 20px;\n    background-color: #f9f9f9;\n    border-radius: 8px;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\nh2 {\n    text-align: center;\n    margin-bottom: 20px;\n}\n\n.user-list {\n    list-style-type: none;\n    padding: 0;\n}\n\n.user-item {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 10px;\n    border-bottom: 1px solid #ccc;\n}\n\n.user-item span {\n    flex: 1;\n}\n\n.user-item button {\n    padding: 5px 10px;\n    margin-left: 10px;\n    background-color: #007bff;\n    color: white;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    font-size: 14px;\n}\n\n.user-item button:disabled {\n    background-color: #ccc;\n    cursor: not-allowed;\n}\n\n.user-item button:hover:not(:disabled) {\n    background-color: #0056b3;\n}\n\n.user-item input {\n    flex: 1;\n    margin-left: 10px;\n    padding: 5px;\n    font-size: 14px;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n}\n\n.error-message {\n    color: red;\n    text-align: center;\n    margin-bottom: 15px;\n}\n\n@media (max-width: 600px) {\n    .user-item {\n        flex-direction: column;\n        align-items: flex-start;\n    }\n\n    .user-item button,\n    .user-item input {\n        width: 100%;\n        margin: 5px 0;\n    }\n}\n",""]);const i=o},9416:(e,n,t)=>{t.r(n),t.d(n,{default:()=>v});var r=t(4848),s=t(6540),a=t(1083),o=t(7767);const i=process.env.REACT_APP_API_URL,l=a.A.create({baseURL:i,headers:{"Content-Type":"application/json"}});l.interceptors.request.use((e=>{const n=localStorage.getItem("token");return n&&(e.headers.Authorization=`Bearer ${n}`),e}),(e=>Promise.reject(e))),l.interceptors.response.use((e=>e),(async e=>{const n=e.config;if(e.response&&401===e.response.status&&!n._retry){n._retry=!0;try{const e=await(async()=>{try{const e=localStorage.getItem("refreshToken");return(await a.A.post(`${i}/refresh-token`,{},{headers:{Authorization:`Bearer ${e}`}})).data.token}catch(e){throw new Error("Failed to refresh token")}})();return localStorage.setItem("token",e),n.headers.Authorization=`Bearer ${e}`,l(n)}catch(e){console.error("Token refresh failed:",e),(0,o.Zp)()("/login")}}else e.response&&403===e.response.status&&(console.error("Forbidden:",e.response.data),(0,o.Zp)()("/forbidden"));return Promise.reject(e)}));var c=t(1854),d=t(5072),u=t.n(d),p=t(7825),h=t.n(p),m=t(7659),x=t.n(m),g=t(5056),f=t.n(g),b=t(540),y=t.n(b),w=t(1113),j=t.n(w),k=t(7100),A={};A.styleTagTransform=j(),A.setAttributes=f(),A.insert=x().bind(null,"head"),A.domAPI=h(),A.insertStyleElement=y(),u()(k.A,A),k.A&&k.A.locals&&k.A.locals;const C=({usersPerPage:e,totalUsers:n,paginate:t,currentPage:s})=>{const a=[];for(let t=1;t<=Math.ceil(n/e);t++)a.push(t);return(0,r.jsx)("nav",{children:(0,r.jsx)("ul",{className:"pagination",children:a.map((e=>(0,r.jsx)("li",{className:"page-item",children:(0,r.jsx)("button",{onClick:()=>t(e),className:"page-link "+(s===e?"active":""),style:{border:"none",background:"none",color:"blue",cursor:"pointer",textDecoration:"underline"},children:e})},e)))})})},v=()=>{const[e,n]=(0,s.useState)([]),[t,a]=(0,s.useState)(!1),[o,i]=(0,s.useState)(""),[d,u]=(0,s.useState)({}),[p,h]=(0,s.useState)(null),[m,x]=(0,s.useState)(""),[g,f]=(0,s.useState)(1);(0,s.useEffect)((()=>{(async()=>{a(!0),i("");try{const e=await(async()=>{try{return(await l.get("/api/users")).data}catch(e){throw new Error("Failed to fetch users")}})();n(e)}catch(e){i("Failed to fetch users")}finally{a(!1)}})().catch((e=>{console.error("Error fetching users:",e),i("Failed to fetch users")}))}),[]);const b=e.filter((e=>e.name.toLowerCase().includes(m.toLowerCase())||e.email.toLowerCase().includes(m.toLowerCase()))),y=10*g,w=y-10,j=b.slice(w,y);return(0,r.jsxs)("div",{className:"admin-page",children:[(0,r.jsx)("h2",{children:"User Management"}),(0,r.jsx)("input",{type:"text",placeholder:"Search users...",value:m,onChange:e=>x(e.target.value)}),t&&(0,r.jsx)(c.A,{}),o&&(0,r.jsx)("p",{className:"error-message",children:o}),!t&&!o&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("ul",{className:"user-list",children:j.map((s=>(0,r.jsxs)("li",{className:"user-item",children:[(0,r.jsxs)("span",{children:[s.name," - ",s.email]}),(0,r.jsx)("button",{onClick:()=>(async t=>{if(window.confirm("Are you sure you want to delete this user?")){a(!0),i("");try{await(async e=>{try{return(await l.delete(`/api/users/${e}`)).data}catch(e){throw new Error("Failed to delete user")}})(t),n(e.filter((e=>e.id!==t)))}catch(e){i("Failed to delete user")}finally{a(!1)}}})(s.id),disabled:t,children:"Delete"}),(0,r.jsx)("input",{type:"text",placeholder:"New Username",value:d[s.id]||"",onChange:e=>u({...d,[s.id]:e.target.value})}),(0,r.jsx)("button",{onClick:()=>(async t=>{if(d[t]){h(t),i("");try{const r=await(async(e,n)=>{try{return(await l.put(`/api/users/${e}`,{name:n})).data}catch(e){throw new Error("Failed to update user")}})(t,d[t]);n(e.map((e=>e.id===t?r:e))),u({...d,[t]:""})}catch(e){i("Failed to update user")}finally{h(null)}}else i("Username cannot be empty")})(s.id),disabled:p===s.id,children:p===s.id?(0,r.jsx)(c.A,{size:24}):"Update"})]},s.id)))}),(0,r.jsx)(C,{usersPerPage:10,totalUsers:b.length,paginate:e=>f(e),currentPage:g})]})]})}}}]);